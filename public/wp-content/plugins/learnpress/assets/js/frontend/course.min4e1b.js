!function(t){"use strict";function e(t){const e=window.localStorage;this.key=t,this.get=function(t){const n=(e.getItem(this.key)||"").split(",");if(t){t+="";const e=n.indexOf(t);if(e>=0)return n[e]}return n},this.set=function(t){return"string"!=typeof t&&(t=t.join(",")),e.setItem(this.key,t),t.split(",")},this.hasSection=function(t){t+="";const e=this.get().indexOf(t);return e>=0&&e},this.add=function(t){t+="";const e=this.get();if(!this.hasSection(t))return e.push(t),this.set(e),e},this.remove=function(t){t+="";const e=this.hasSection(t);if(!1!==e){const t=this.get();return t.splice(e,1),this.set(t),t}return!1}}function n(n){const i=t(".lp-overlay");t("form[name=learn-press-form-complete-lesson]");let o,s,c=new e("sections"),l=t("body"),r=(t(".content-item-scrollable"),t("#learn-press-course-curriculum")),a=t("#learn-press-content-item"),u=(r.find(".curriculum-scrollable"),t("#course-item-content-header")),d=t("#course-item-content-footer"),f=r.find(".course-item"),h=!0,m=0,p=!1;function g(e){let n,i=t(e.target);i.is("input.option-check")||(n=i.closest(".answer-option").find("input.option-check"),n.length&&(n.is(":disabled")||(n.is(":checkbox")?n[0].checked=!n[0].checked:n[0].checked=!0)))}function w(){const e=t(this).closest(".section").data("section-id");t(this).siblings(".section-content").slideToggle((function(){t(this).is(":visible")?c.remove(e):c.add(e)}))}function y(e,n){if(t(document.body).hasClass("course-item-popup"))return;const i=t(n);0!==i.closest(".course-nav").siblings().length&&LP.setUrl(i.attr("href"))}function v(e){if("keypress"===e.type&&13===e.keyCode)return!1;const n=this.value,i=new RegExp(n,"ig");f.map((function(){const e=t(this);e.find(".item-name").text().match(i)||!n.length?e.show():e.hide()})),t(".section").show().each((function(){n.length?t(this).find(".section-content").children(":visible").length?t(this).show():t(this).hide():t(this).show()})),t(this).closest(".course-item-search").toggleClass("has-keyword",!!this.value.length)}function b(e){t(this).closest(".course-item-search").find("input").val("").trigger("keyup")}function k(){t("#qm").css({"z-index":999999999,position:"relative"}),t("html, body").css("overflow","auto")}function C(){return r.outerWidth()}function M(t){}function T(e){t(document)[e?"off":"on"]("mousemove.maybe-show-curriculum","body",M)}function x(){s&&clearTimeout(s),s=setTimeout((function(){const e=C();o&&(r.stop().animate({left:-e}),a.stop().animate({left:0}),d.stop().animate({left:0},(function(){t(document,window).trigger("learn-press/toggle-content-item")})),u.find(".course-item-search").hide(),h=!1,T())}),3e3)}function O(e){e.preventDefault();const n=C();let i="left";"rtl"===t("html").attr("dir")&&(i="right"),o=l.toggleClass("full-screen-content-item").hasClass("full-screen-content-item"),"right"===i?(r.stop().animate({right:o?-n:0}),a.stop().animate({right:o?0:n}),d.stop().animate({right:o?0:n},(function(){t(document,window).trigger("learn-press/toggle-content-item")}))):(r.stop().animate({left:o?-n:0}),a.stop().animate({left:o?0:n}),d.stop().animate({left:o?0:n},(function(){t(document,window).trigger("learn-press/toggle-content-item")}))),h=!o,window.localStorage&&window.localStorage.setItem("lp-full-screen",o?"yes":"no"),o&&T(),u.find(".course-title").stop().animate({marginLeft:o?-n:0}),u.find(".course-item-search").stop().animate({opacity:o?0:1}).css({visibility:o?"hidden":"visible"})}function S(){t(document).on("learn-press/nav-tabs/clicked",y).on("keyup keypress",".course-item-search input",v).on("click",".course-item-search button",b).on("click","#wp-admin-bar-query-monitor",k).on("click",".answer-options .answer-option",g).on("click",".section-header",w).on("submit","form.lp-form",(function(){!function(e){const n=t(".answer-options"),i=t(e),o=n.serializeJSON(),s=t('<input type="hidden" name="question-data" />').val(JSON.stringify(o));if("post"===(i.attr("method")+"").toLowerCase())i.find('input[name="question-data"]').remove(),i.append(s).append(t("<div />").append(n.clone()).hide())}(this)})).on("click",".toggle-content-item",O),r.hover((function(){s&&clearTimeout(s)}),(function(){o&&x()}))}this.completeItemsCourse=function(){const e=this;t(document).on("click",".lp-btn-complete-item",(function(n){n.preventDefault();const o=t(this).closest("form");"yes"===lpGlobalSettings.show_popup_confirm_finish?(e.lpModalOverlay.setElCalledModal(o),e.lpModalOverlay.callBackYes=function(){o.submit()},i.show()):o.submit()}))},this.lpModalOverlay={elMessage:null,elTitle:null,callBackYes:null,elCalledModal:null,init(){const e=this;this.elMessage=i.find(".message"),this.elTitle=i.find(".modal-title"),t(document).on("click",".close, .btn-no",(function(){i.hide()})),t(document).on("click",".btn-yes",(function(){e.callBackYes()}))},setElCalledModal(t){this.elCalledModal=t,this.setContentModal()},setContentModal(){this.elTitle.text(this.elCalledModal.data("title")),this.elMessage.text(this.elCalledModal.data("confirm"))}},this.finishCourse=function(){const e=this,n=t(".form-button-finish-course");if(!n)return;n.find(".lp-btn-finish-course").on("click",(function(t){t.preventDefault(),"yes"===lpGlobalSettings.show_popup_confirm_finish?(e.lpModalOverlay.setElCalledModal(n),e.lpModalOverlay.callBackYes=function(){n.submit()},i.show()):n.submit()}))},this.scrollToItemViewing=function(){const e=t(".viewing-course-item");if(e.length){const n=t("#course-item-content-header").outerHeight(),i=t(".section-title").outerHeight(),o=t(".section-header").outerHeight(),s=new RegExp("^viewing-course-item-([0-9].*)"),c=e.attr("class").split(/\s+/);let l=0;if(t.each(c,(function(t,e){const n=s.exec(e);if(n)return l=n[1],!1})),0===l)return;let r=t(".course-item-"+l).offset().top-n;void 0===i?r=r-o+20:r-=i,t("#learn-press-course-curriculum").animate({scrollTop:r+7},800)}},function(){if(p=l.hasClass("course-item-popup"),function(){let e=t(".course-item.current").closest(".section"),n=t(".curriculum-sections").find(".section"),i=e.data("section-id"),o=[];o=e?c.remove(i):c.get();for(let t=0;t<o.length;t++)n.filter('[data-section-id="'+o[t]+'"]').find(".section-content").hide()}(),S(),p){if(t("#wpadminbar").length&&(l.addClass("wpadminbar"),m=32),function(){const e=t(".content-item-summary.content-item-video");if(!e.length)return;let n,i,o=e.find(".entry-video"),s=o.find("iframe"),c=s.attr("width"),l=s.attr("height"),r=1;function a(){const t=s.width();n=t*r,s.css({height:n,marginLeft:(o.width()-t)/2}),e.css({paddingTop:n})}if(!o.length)return!1;c&&l&&-1===c.indexOf("%")&&-1===l.indexOf("%")&&(r=l/c),t(window).on("resize.fit-content-video learn-press/toggle-content-item",(function(){i&&clearTimeout(i),i=setTimeout(a,250)})).trigger("resize.fit-content-video"),t(".content-item-scrollable").scroll((function(){t(this).find(".entry-video").css("padding-top",this.scrollTop)}))}(),o=window.localStorage&&"yes"===window.localStorage.getItem("lp-full-screen"),t(window).width()<=768&&(o=!0),o){const t=C();l.addClass("full-screen-content-item"),a.css("left",0),r.css("left",-t),d.css("left",0),h=!o,u.find(".course-title").css({marginLeft:o?-t:0}),u.find(".course-item-search").css({opacity:o?0:1}),T()}setTimeout((function(){const e=l.find(".curriculum-sections").parent();e.scrollTo(e.find(".course-item.current"),100),window.location.hash&&t(".content-item-scrollable:last").scrollTo(t(window.location.hash))}),300),l.css("opacity",1)}}()}t((function(){const e=new n({});e.lpModalOverlay.init(),e.completeItemsCourse(),e.finishCourse(),e.scrollToItemViewing(),t(this).on("submit",'form[name="course-external-link"]',(function(){const e=t(this).attr("action");if(e)return window.location.href=e,!1}));const i=t(".course-item-is-blocked"),o=i.val();i.length&&o<2147483647&&setTimeout((function(){window.location.reload(!0)}),o)}))}(jQuery);